var T=e=>{throw TypeError(e)};var C=(e,t,s)=>t.has(e)||T("Cannot "+s);var i=(e,t,s)=>(C(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),f=(e,t,s,r)=>(C(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),$=(e,t,s)=>(C(e,t,"access private method"),s);import{z as M,j as I,w as p,A as J,n as K,g as w}from"./runtime.bkAFKJgj.js";import{r as L,l as N}from"./loop.BGGTUj09.js";import{i as q}from"./utils.vK_o3JBb.js";function D(e,t,s,r){if(typeof s=="number"||q(s)){const m=r-s,n=(s-t)/(e.dt||1/60),E=e.opts.stiffness*m,G=e.opts.damping*n,H=(E-G)*e.inv_mass,z=(n+H)*e.dt;return Math.abs(z)<e.opts.precision&&Math.abs(m)<e.opts.precision?r:(e.settled=!1,q(s)?new Date(s.getTime()+z):s+z)}else{if(Array.isArray(s))return s.map((m,n)=>D(e,t[n],s[n],r[n]));if(typeof s=="object"){const m={};for(const n in s)m[n]=D(e,t[n],s[n],r[n]);return m}else throw new Error(`Cannot spring ${typeof s} values`)}}var g,c,b,d,a,u,l,y,A,o,v,k,F;const P=class P{constructor(t,s={}){h(this,k);h(this,g,M(.15));h(this,c,M(.8));h(this,b,M(.01));h(this,d,M(void 0));h(this,a,M(void 0));h(this,u);h(this,l,0);h(this,y,1);h(this,A,0);h(this,o,null);h(this,v,null);i(this,d).v=i(this,a).v=t,typeof s.stiffness=="number"&&(i(this,g).v=j(s.stiffness,0,1)),typeof s.damping=="number"&&(i(this,c).v=j(s.damping,0,1)),typeof s.precision=="number"&&(i(this,b).v=s.precision)}static of(t,s){const r=new P(t(),s);return I(()=>{r.set(t())}),r}set(t,s){var m,n;if((m=i(this,v))==null||m.reject(new Error("Aborted")),s!=null&&s.instant||i(this,d).v===void 0)return(n=i(this,o))==null||n.abort(),f(this,o,null),p(i(this,d),p(i(this,a),t)),f(this,u,t),Promise.resolve();s!=null&&s.preserveMomentum&&(f(this,y,0),f(this,A,s.preserveMomentum));var r=f(this,v,J());return r.promise.catch(K),$(this,k,F).call(this,t).then(()=>{r===i(this,v)&&r.resolve(void 0)}),r.promise}get current(){return w(i(this,d))}get damping(){return w(i(this,c))}set damping(t){p(i(this,c),j(t,0,1))}get precision(){return w(i(this,b))}set precision(t){p(i(this,b),t)}get stiffness(){return w(i(this,g))}set stiffness(t){p(i(this,g),j(t,0,1))}get target(){return w(i(this,a))}set target(t){this.set(t)}};g=new WeakMap,c=new WeakMap,b=new WeakMap,d=new WeakMap,a=new WeakMap,u=new WeakMap,l=new WeakMap,y=new WeakMap,A=new WeakMap,o=new WeakMap,v=new WeakMap,k=new WeakSet,F=function(t){var r;if(p(i(this,a),t),(r=i(this,d)).v??(r.v=t),i(this,u)??f(this,u,i(this,d).v),!i(this,o)){f(this,l,L.now());var s=1e3/(i(this,A)*60);i(this,o)??f(this,o,N(m=>{f(this,y,Math.min(i(this,y)+s,1));const n={inv_mass:i(this,y),opts:{stiffness:i(this,g).v,damping:i(this,c).v,precision:i(this,b).v},settled:!0,dt:(m-i(this,l))*60/1e3};var E=D(n,i(this,u),i(this,d).v,i(this,a).v);return f(this,u,i(this,d).v),f(this,l,m),p(i(this,d),E),n.settled&&f(this,o,null),!n.settled}))}return i(this,o).promise};let B=P;function j(e,t,s){return Math.max(t,Math.min(s,e))}export{B as S};
