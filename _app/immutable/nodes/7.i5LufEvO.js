var tt=a=>{throw TypeError(a)};var dt=(a,s,l)=>s.has(a)||tt("Cannot "+l);var g=(a,s,l)=>(dt(a,s,"read from private field"),l?l.call(a):s.get(a)),F=(a,s,l)=>s.has(a)?tt("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(a):s.set(a,l);import{a as P,t as K,c as ut,n as at}from"../chunks/disclose-version.Rne7Y7Ho.js";import{ar as m,g as t,n as y,p as xt,ap as vt,$ as pt,t as S,a as yt,y as H,c as k,r as I,s as M,f as T,aq as gt,as as mt}from"../chunks/runtime.DIHy09Nm.js";import{e as wt,s as et}from"../chunks/render.DOC5-nbG.js";import{i as st}from"../chunks/if.DwqOPwtm.js";import{e as V,i as J}from"../chunks/each.B9j05DSm.js";import{s as f}from"../chunks/attributes.CfRrJJIC.js";import{p as u}from"../chunks/proxy.N5gkqYpK.js";import{b as _t}from"../chunks/this.PGL8M-7B.js";function it(a,s,l=0){const x=a.x-s.x,e=a.y-s.y;return Math.sqrt(x*x+e*e)<l+a.radius+(s.radius||5)}function Mt(a,s,l){return{x:(1-a)*s.x+a*l.x,y:(1-a)*s.y+a*l.y}}function rt(a,s=0,l=100,x=0,e=100){const o=[];for(let w=0;w<a;w++){const j=Math.floor(Math.random()*(l-s+1))+s,_=Math.floor(Math.random()*(e-x+1))+x;o.push({x:j,y:_})}return o}var $,q,R,E,L;class h{constructor(s,l,x){F(this,$,m());F(this,q,m());F(this,R,m());F(this,E,m());F(this,L,m());this.x=s,this.y=l,this.angle=0,this.radius=x,this.prevAngle=null,this.left=null,this.right=null,this.followAt=null}get x(){return t(g(this,$))}set x(s){y(g(this,$),u(s))}get y(){return t(g(this,q))}set y(s){y(g(this,q),u(s))}get front(){return t(g(this,R))}set front(s){y(g(this,R),u(s))}get left(){return t(g(this,E))}set left(s){y(g(this,E),u(s))}get right(){return t(g(this,L))}set right(s){y(g(this,L),u(s))}setFollowAt(s){this.followAt=s}setFollowing(s,l){this.target=s,this.followAt=l,this.tick()}tick(){const s=this.followAt;let l=Math.atan2(this.y-this.target.y,this.x-this.target.x);this.prevAngle!=null&&(this.front={x:this.x+Math.cos(0+this.prevAngle)*this.radius,y:this.y+Math.sin(0+this.prevAngle)*this.radius},this.left={x:this.x+Math.cos(.5*Math.PI+this.prevAngle)*this.radius,y:this.y+Math.sin(.5*Math.PI+this.prevAngle)*this.radius},this.right={x:this.x+Math.cos(1.5*Math.PI+this.prevAngle)*this.radius,y:this.y+Math.sin(1.5*Math.PI+this.prevAngle)*this.radius}),this.prevAngle=l,this.x=this.target.x+Math.cos(l)*s,this.y=this.target.y+Math.sin(l)*s}}$=new WeakMap,q=new WeakMap,R=new WeakMap,E=new WeakMap,L=new WeakMap;var At=K("<div> </div>"),bt=K("Previous best: <!>",1),Ft=at('<circle fill="purple"></circle><circle fill="purple"></circle><path fill-opacity="0.1"></path>',1),Pt=at('<rect width="10" height="10"></rect>'),kt=K('<div class="w-full"><div class="fixed right-[30rem] top-10"><span class="text-7xl"> </span> <div><!></div></div> <svg class="fixed top-0 left-0 h-full w-full" viewport="0 0 600 400"><circle></circle><!><!></svg> <div style="z-index: 999;" class="relative"><a href="/">back</a></div></div>');function zt(a,s){xt(s,!0);let l=m(void 0),x=u({x:0,y:0}),e=m(u(new h(400,200,14))),o=m(u([])),w=m(!1),j=1,_=m(0),N=u([]),O=H(()=>[...N].sort((i,r)=>r-i)),Q=H(()=>t(w)?"red":"PaleVioletRed");function lt(i){x.x=i.clientX,x.y=i.clientY}function U(){const i=t(l).getBoundingClientRect();let r=Mt(.05,t(e),{x:x.x-i.x,y:x.y});t(e).x=r.x,t(e).y=r.y,y(w,!1),t(o).forEach((c,n)=>{c.tick(),n>7&&it(t(e),c)&&y(w,!0)});const d=t(A).findIndex(c=>it(t(e),c,j-1));if(d!=-1){mt(_),t(A).splice(d,1);const c=new h(0,0,1);if(c.setFollowing(t(o)[t(o).length-1],10),c.tick(),t(o).push(c),t(e).radius+=.15,t(o).forEach((n,v)=>{v==0?t(o)[v].radius+=.25:v<t(o).length/2?(n.radius*=1.02,n.setFollowAt(n.radius*.9)):(n.radius+=1,n.setFollowAt(n.radius*.9))}),t(e).radius+=.05,Math.random()>.75){const n=t(o).length-2;t(o).splice(n,1),t(o)[n],t(o)[n].setFollowing(t(o)[n-1],t(o)[n-1].radius),t(o)[n].radius*=2}}requestAnimationFrame(U)}function nt(i){var c;if(!((c=i[0])!=null&&c.left))return;const[r,d]=i.reduce(([n,v],p)=>[n.concat(p.left),v.concat(p.right)],[[],[]]);return[r,d.reverse()].flat().map(({x:n,y:v})=>`L ${n} ${v}`).join().replace(/^L/,"M")}function W(){let i=[new h(t(e).x,t(e).y,14),new h(t(e).x,t(e).y,16),new h(t(e).x,t(e).y,17),new h(t(e).x,t(e).y,18),new h(t(e).x,t(e).y,19),new h(t(e).x,t(e).y,18),new h(t(e).x,t(e).y,17),new h(t(e).x,t(e).y,14),new h(t(e).x,t(e).y,12),new h(t(e).x,t(e).y,9),new h(t(e).x,t(e).y,7),new h(t(e).x,t(e).y,3),new h(t(e).x,t(e).y,1)];y(e,u(new h(t(e).x,t(e).y,14)));for(let r=0;r<i.length;(r+=1)-1)r==0?i[r].setFollowing(t(e),0):i[r].setFollowing(i[r-1],Math.min(i[r-1].radius,12));y(o,u(i))}let ot=H(()=>nt(t(o))),A=m(u(rt(10,400,1200,100,600)));setInterval(()=>{if(t(w)&&t(_)>0&&(y(A,u([])),N.push(t(_)),y(_,0),W()),t(A).length<20){const[i]=rt(1,400,1200,100,600);t(A).push(i)}},200),vt(()=>{W(),requestAnimationFrame(U)});var z=kt();wt("mousemove",pt.body,lt);var B=k(z),D=k(B),ht=k(D,!0);I(D);var X=M(D,2),ct=k(X);st(ct,()=>t(O).length>0,i=>{var r=bt(),d=M(T(r));V(d,17,()=>t(O),J,(c,n,v)=>{var p=At();f(p,"style",`opacity: ${(10-v)/10}`);var b=k(p,!0);I(p),S(()=>et(b,t(n))),P(c,p)}),P(i,r)}),I(X),I(B);var G=M(B,2);_t(G,i=>y(l,i),()=>t(l));var C=k(G),Y=M(C);V(Y,17,()=>t(o),J,(i,r)=>{var d=ut(),c=T(d);st(c,()=>t(r).left,n=>{var v=Ft(),p=T(v);f(p,"r",5);var b=M(p);f(b,"r",5);var Z=M(b);S(()=>{f(p,"cx",t(r).left.x),f(p,"cy",t(r).left.y),f(b,"cx",t(r).right.x),f(b,"cy",t(r).right.y),f(Z,"d",t(ot)),f(Z,"fill",t(Q))}),P(n,v)}),P(i,d)});var ft=M(Y);V(ft,17,()=>t(A),J,(i,r)=>{var d=Pt();S(()=>{f(d,"x",t(r).x),f(d,"y",t(r).y)}),P(i,d)}),I(G),gt(2),I(z),S(()=>{et(ht,t(_)),f(C,"cx",t(e).x),f(C,"cy",t(e).y),f(C,"r",t(e).radius),f(C,"fill",t(Q))}),P(a,z),yt()}export{zt as component};
